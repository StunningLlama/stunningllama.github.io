<main>
  <style>
    body {
    font-family: "Segoe UI", Roboto, sans-serif;
    background-color: #f8f9fa;
    color: #222;
    line-height: 1.6;
    margin: 0;
    padding: 0;
}

main {
    max-width: 850px;
    margin: 0 auto;
    padding: 2rem;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

h1, h2 {
    font-weight: 600;
    color: #2c3e50;
}

h1 {
    font-size: 2rem;
    margin-top: 2rem;
    border-bottom: 2px solid #dee2e6;
    padding-bottom: 0.4rem;
}

h2 {
    font-size: 1.4rem;
    margin-top: 1.5rem;
    border-left: 4px solid #3498db;
    padding-left: 0.5rem;
}

hr {
    border: none;
    border-top: 2px solid #dee2e6;
    margin: 2rem 0;
}

ul {
    padding-left: 1.5rem;
}

li {
    margin: 0.4rem 0;
}

strong {
    color: #34495e;
}

p {
    margin: 0.8rem 0;
}

code {
    background: #f4f4f4;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: Consolas, monospace;
}

@media (max-width: 600px) {
    main {
        padding: 1rem;
    }
    h1 {
        font-size: 1.6rem;
    }
    h2 {
        font-size: 1.2rem;
    }
}

figure {
    margin: 1.5rem auto;
    text-align: center;
}

figure img {
    max-width: 40%;
    height: auto;
    border: 1px solid #ccc;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

figcaption {
    font-size: 0.9rem;
    color: #555;
    margin-top: 0.4rem;
    font-style: italic;
}

table {
  width:100%;
  border-collapse: collapse; /* optional: removes double borders */
}

td, th {
  vertical-align: top; /* aligns text at the top of cells */
  padding: 6px; /* optional: adds some spacing */
}

td:first-child, th:first-child {
  font-weight: bold; /* makes first column bold */
  color: #34495e;
    width: 25%;
}

  </style>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js">
  </script>

<h1>Introduction</h1>
Brandon's semiconductor simulator (SemiSim) is an educational tool made with the original purpose of helping its creator understand semiconductor devices.
It is fully interactive, letting users draw circuits and create their own devices in a manner similar to painting software.
There is a wide variety of different materials to choose from and many ways to visualize the electromagnetic phenomena associated with semiconductors.
Users can either load one of the many premade simulations or create their own.

<h2>Physics</h2>
The simulation is set on a two-dimensional grid over which it solves the 2D Maxwell equations. The electric field lies in the same plane as the surface of the screen whereas the magnetic field is perpendicular to it.
On top of this, there are two types of charge carriers, electrons and holes, which feel electric and chemical forces that determine their dynamics.
The simulation uses a FDTD (finite-difference time domain) scheme obtained by discretizing the Maxwell equations and the drift-diffusion equations and coupling the two together.
This results in a simulation that demonstrates many of the important properties of semiconductors and semiconductor devices, such as:
<ul>
<li>PN junctions</li>
<li>Metal-semiconductor junctions</li>
<li>Field effect transistors</li>
<li>Galvani potential</li>
<li>Thermoelectricity</li>
</ul>

<h2>Limitations</h2>
Because the simulation uses a very simplified model of how semiconductors work, it is not able capture some phenomena that show up in real systems. Things that the simulation cannot handle include:
<ul>
<li>Metal band structures</li>
<li>Electrical breakdown</li>
<li>Kinetic effects</li>
<li>Quantum tunelling</li>
<li>Velocity saturation</li>
<li>Fermi level pinning</li>
<li>Different recombination mechanisms</li>
</ul>
Finally, certain properties of materials differ from their real life counterparts (for example, the charge carrier mobility of the semiconductor material is about 1500x greater than that of Silicon).
This was done for educational purposes.

<h1>Simulation features</h1>
The interface consists of the simulation area which the user can interact with and the settings panel containing all the simulation controls. <figure><img src="images/app.png" alt="Application" style="max-width:60%"><figcaption>Simulation area (purple, left) and settings (blue, right).</figcaption></figure>
The main way to interact with circuits is to change the strength of voltage sources and turn switches on and off. The quickest way to get started is to load one of the examples and start changing the voltages.
<h2>Simulation variables</h2>
Listed below are the most important variables that capture the state of the simulation at a given time:
<table>
<ul>
  <tr><td>\(\vec{E} = (E_x, E_y, 0)\)</td><td>Electric field [V/m]</td></tr>
  <tr><td>\(\vec{B} = (0, 0, B_z)\)</td><td>Magnetic field [T]</td></tr>
  <tr><td>\(\rho_n\)</td><td>Charge density of electrons [C/m^3]</td></tr>
  <tr><td>\(\rho_p\)</td><td>Charge density of holes [C/m^3]</td></tr>
  <tr><td>\(\rho = \rho_n + \rho_p\)</td><td>Net charge density [C/m^3]</td></tr>
  <tr><td>\(\vec{J}_n = (J_{nx}, J_{ny}, 0)\)</td><td>Electron current density [A/m^2]</td></tr>
  <tr><td>\(\vec{J}_p = (J_{px}, J_{py}, 0)\)</td><td>Hole current density [A/m^2]</td></tr>
  <tr><td>\(\vec{J} = \vec{J}_n + \vec{J}_p\)</td><td>Total current density [A/m^2]</td></tr>
  <tr><td>\(\vec{D} = \epsilon \vec{E}\)</td><td>Electric displacement field [C/m^2]</td></tr>
  <tr><td>\(\vec{H} = \frac{1}{\mu} \vec{B}\)</td><td>Magnetic field [A/m]</td></tr>
  <tr><td>\(\vec{S} = \vec{E}\times \vec{H}\)</td><td>Poynting vector [W/m^2]</td></tr>
  <tr><td>\(u = \frac{1}{2}(\vec{E}\cdot \vec{D} + \vec{B} \cdot \vec{H})\)</td><td>Electromagnetic energy density [J/m^3]</td></tr>
  <tr><td>\(\phi\)</td><td>Electric scalar potential [V]</td></tr>
  <tr><td>\(G\)</td><td>Charge carrier generation rate [1/(m^3 s)]</td></tr>
  <tr><td>\(R\)</td><td>Charge carrier recombination rate [1/(m^3 s)]</td></tr>
  <tr><td>\(F_n\)</td><td>Electron quasi-Fermi level (free energy) [V]*</td></tr>
  <tr><td>\(F_p\)</td><td>Hole quasi-Fermi level (free energy) [V]*</td></tr>
  <tr><td>\(F\)</td><td>Average free energy [V]</td></tr>
  <tr><td>\(Q\)</td><td>Heat dissipation [J/(s m^3)]</td></tr>
  <tr><td>\(S\)</td><td>Entropy generation [J/ (K s m^3)]</td></tr>
</ul>
</table>
* Here free energy is measured per unit of charge instead of per particle, hence the units used are [V] and not [eV].
<h2>Vector view modes</h2>
  <p><strong>Arrows:</strong> The direction and brightness of arrows corresponds to the direction and magnitude of the vector field. <figure><img src="images/arrows.png" alt="Arrows"></figure></p>
  <p><strong>Lines:</strong> 
The brightness and density of lines indicates the magnitude of the field. <figure><img src="images/lines.png" alt="Field lines"></figure></p>
  <p><strong>Dots <small>[desktop]</small>:</strong> The velocity of the dots is proportional to the value of the vector field. <figure><img src="images/dots.png" alt="Dots"></figure></p>
  <p><strong>Contour <small>[desktop]</small>:</strong> Contour lines indicate a region on which the scalar field has a constant value.  <figure><img src="images/contour.png" alt="Contour lines"></figure></p>
  <p><strong>Charge carriers <small>[desktop]</small>:</strong> Electrons and holes are represented as blue and red dots, respectively.
    Both dots move at the actual drift velocities of their corresponding charge carriers and their density accurately reflects the density of charge carriers. This is much more realistic but less flexible than the dots view. <figure><img src="images/carriers.png" alt="Charge carriers"></figure></p>
<h2>Options</h2>
<table>
  <tr><td>Pause</td><td>Pauses and unpauses the simulation.</td></tr>
  <tr><td>Show detailed info</td><td>Displays a tooltip that contains the values of all the simulation variables at the cursor's location.</td></tr>
  <tr><td>Show text background</td><td>Gives text boxes a black background, making the text easier to see.</td></tr>
  <tr><td>Display interface</td><td>Shows probe info, graph locations, time, and tooltip.</td></tr>
  <tr><td>Boundary condition</td><td>Choose between a boundary that absorbs outgoing radiation or a perfectly conductive boundary that reflects it.</td></tr>
  <tr><td>Scalar view</td><td>Choose which field to display as a color scale over the simulation field.</td></tr>
  <tr><td>Vector view</td><td>Choose which vector field to visualize (only works for 2D vectors, see "Vector view modes").</td></tr>
  <tr><td>Show material colors</td><td>If checked, gives each material a different color, making them easier to tell apart.</td></tr>
  <tr><td>Timestep</td><td>Sets the simulation timestep. The maximum timestep is determined by the CFL condition for the wave equation and diffusion equations for each charge carrier.</td></tr>
  <tr><td>Sim steps/frame</td><td>Sets the number of iterations performed during each frame. Most of the examples require at least 10 steps/frame to run responsively.
    The maximum number depends on how good the user's computer is.</td></tr>
  <tr><td>Scalar brightness</td><td>Sets the brightness of the scalar field.</td></tr>
  <tr><td>Vector brightness</td><td>Sets the brightness of the vector field.</td></tr>
  <tr><td>Save scenario</td><td>Saves the current simulation to a file.</td></tr>
  <tr><td>Load scenario</td><td>Loads a simulation from a file. SemiSim comes with a variety of pre-made simulations located in the "examples" folder.</td></tr>
  <tr><td>Clear all</td><td>Removes all materials and resets all fields.</td></tr>
  <tr><td>Set fields to zero</td><td>Sets all fields to their default values, leaving the materials unchanged.</td></tr>
  <tr><td>Advanced settings <br><small>[desktop]</small> </td><td>Opens advanced simulation settings window, for advanced users only.</td></tr>
  <tr><td>Tool</td><td>Selects one of the tools.</td></tr>
  </table>

<h2>Tools</h2>
<table>
    <tr><td>Interact</td><td>Allows user to control voltage sources and turn switches on and off by clicking.</td></tr>
    <tr><td>Draw</td><td>Adds material to the field.</td></tr>
    <tr><td>Voltage</td><td>Adds a voltage probe that measures electrochemical potential at a certain point (See "What do voltmeters actually measure").</td></tr>
    <tr><td>Current <br><small>[click and drag]</small></td><td>Adds a current probe that measures current across a wire.
    </td></tr>
    <tr><td>Ground</td><td>Specifies the point relative to which probes measure voltage (optional).</td></tr>
    <tr><td>Delete probe</td><td>Click to delete a probe.</td></tr>
    <tr><td>Plot bands <br><small>[click and drag, desktop]</small></td><td>Specifies a 1D line along which the bands are plotted.
      The plot contains the conduction and valence energy band edges as well as the quasi-Fermi levels of electrons in both bands.  <figure><img src="images/bandplot.png" alt="Band plot" style="max-width:70%"><figcaption>Valence and conduction band energies shown as solid lines. Quasi-Fermi levels are dashed lines.</figcaption></figure></td></tr>
    <tr><td>Plot scalar field <br><small>[click and drag, desktop]</small></td><td>Makes a plot of the currently selected scalar field.</td></tr>
    <tr><td>Plot carriers <br><small>[click and drag, desktop]</small></td><td>Makes a logarithmic plot of the number density of electrons and holes.</td></tr>
    <tr><td>Flashlight <br><small>[click and hold, desktop]</small></td><td>Shines a light on the region under the cursor. Light generates electron and hole pairs.</td></tr>
    <tr><td>Replace</td><td>Similar to the draw tool, but overwrites occupied areas.</td></tr>
    <tr><td>Line <br><small>[click and drag]</small></td><td>Draws a line of material.</td></tr>
    <tr><td>Fill</td><td>Fills a region with a certain material, similar to the bucket tool.</td></tr>
    <tr><td>Erase</td><td>Erases material.</td></tr>
    <tr><td>Select</td><td>Makes a rectangular selection which can be dragged around and moved.</td></tr>
    <tr><td>Select region</td><td>Selects a contiguous region, similar to the bucket tool.</td></tr>
    <tr><td>Text</td><td>Place a text cursor allowing text to be typed on the screen.</td></tr>
</table>

<h2>Keyboard/Mouse Controls</h2>
<table>
    <tr><td>P or Space</td><td>Pause &amp; unpause</td></tr>
    <tr><td>F</td><td>Advance frame</td></tr>
    <tr><td>Q</td><td>Change brush shape</td></tr>
    <tr><td>C</td><td>Toggle material color</td></tr>
    <tr><td>V</td><td>Toggle vectors</td></tr>
    <tr><td>S</td><td>Toggle scalar colors</td></tr>
    <tr><td>T</td><td>Toggle tooltip</td></tr>
    <tr><td>G</td><td>Toggle text background</td></tr>
    <tr><td>H</td><td>Toggle user interface</td></tr>
    <tr><td>Mouse wheel</td><td>Change brush size</td></tr>
    <tr><td>Shift</td><td>Draw straight lines</td></tr>
    <tr><td>Ctrl</td><td>Fill area</td></tr>
    <tr><td>Alt or Option</td><td>Pick material</td></tr>
    <tr><td>Ctrl-X</td><td>Cut</td></tr>
    <tr><td>Ctrl-C</td><td>Copy</td></tr>
    <tr><td>Ctrl-V</td><td>Paste</td></tr>
    <tr><td>Left mouse</td><td>Draw material</td></tr>
    <tr><td>Right mouse</td><td>Erase material</td></tr>
    <tr><td>Middle mouse</td><td>Pick material</td></tr>
    <tr><td>R <small>[desktop]</small></td><td>Record probe data (saves to probedata.txt)</td></tr>
</table>

<h2>Materials</h2>
<table>
    <tr><td>Voltage source</td><td>Generates a voltage that can be used to power circuits.</td></tr>
    <tr><td>Switch</td><td>Conductivity can be switched on and off by the user.</td></tr>
    <tr><td>Metal</td><td>Material that conducts electricity very well.</td></tr>
    <tr><td>Conductive metal</td><td>More conductive than regular metal.</td></tr>
    <tr><td>Resistive metal</td><td>Less conductive than regular metal.</td></tr>
    <tr><td>High workfunction metal</td><td>Metal that forms an ohmic contact with p-type semiconductor.</td></tr>
    <tr><td>Low workfunction metal</td><td>Metal that forms an ohmic contact with n-type semiconductor.</td></tr>
    <tr><td>Intrinsic semiconductor</td><td>Undoped, with equal number of electrons and holes.</td></tr>
    <tr><td>P-type semiconductor</td><td>Represents a semiconductor doped with holes.</td></tr>
    <tr><td>N-type semiconductor</td><td>Represents a semiconductor doped with electrons.</td></tr>
    <tr><td>Heavily doped P-type semiconductor</td><td>Has a large concentration of holes.</td></tr>
    <tr><td>Heavily doped N-type semiconductor</td><td>Has a large concentration of electrons.</td></tr>
    <tr><td>Lightly doped P-type semiconductor</td><td>Has a small concentration of holes.</td></tr>
    <tr><td>Lightly doped N-type semiconductor</td><td>Has a small concentration of electrons.</td></tr>
    <tr><td>Dielectric</td><td>Material with a large permittivity/dielectric constant.</td></tr>
    <tr><td>Ferromagnet</td><td>Magnetic material with high relative permeability.</td></tr>
    <tr><td>Positive static charge</td><td>Positively charged insulating material.</td></tr>
    <tr><td>Negative static charge</td><td>Negatively charged insulating material.</td></tr>
    <tr><td>Decoration</td><td>Used for text or circuit symbols, has no effect otherwise.</td></tr>
    <tr><td>Vacuum</td><td>Empty space.</td></tr>
</table>
<figure><img src="images/palette.png" alt="Palette"><figcaption>Colors of all the materials.</figcaption></figure>

<!--
<h1>Technical details</h1>
The simulation runs on a staggered grid with B and rho...
- equations
- discretization scheme
- numerical stability & CFL condition
- logarithmic mean
- parallelism
[TODO]
-->

<h1>Miscellaneous questions and answers</h1>
<h2>Why does this simulation exist?</h2>
I created this simulator because I wanted to get a deeper understanding of how semiconductors work.
It's been my experience that there's been a lack of good simulations that demonstrate advanced topics in physics.
There certaintly exists many educational physics simulations, but they're all either aimed at lower educational levels, or they are very restricted in how the user can interact with the system.
The only examples I've seen of simulations that combine advanced topics with a generous amount of interactivity are the physics applets written by Paul Falstad, to whom I'm also grateful for looking over my project and helping to convert it to Javascript.
I've tried to give users many different ways of interacting with the simulation. Circuits can be drawn with just a few clicks of the mouse, allowing users to easily experiment with their own circuits.
There are also many different ways of visualizing the underlying physics that I've incorporated into the settings. Each one gives a different perspective on the physics that is happening.

<h2>What do the colors mean?</h2>
In general, the color red is associated with either holes or a positive charge. Blue represents electrons or negative charge. White means both electrons and holes exist a location.
In the rest of the cases, yellow represents a positve quantity (eg. chemical potential or magnetic field), while cyan is negative. Finally, green is used for quantites that are always positive (eg. energy density).
Note: Each material also has its own color which is unrelated to the aforementioned color scheme.

<h2>What do voltmeters actually measure?</h2>
You might notice that the reading from a voltage probe doesn't match the electric potential Φ. In reality, voltmeters do not measure Φ but rather differences in electrochemical potential of charge carriers.
Things get a bit trickier when we ask what the voltage is in a piece of semiconductor, becuase now there are multiple charge carriers! In this case we can try to define voltage as the reading we get when we stick a small metallic
probe at a certain point. This can actually be performed in the simulation, and the result is that the electrochemical potential of the metal lies between that of electrons and holes, closer to whichever one has a larger density.
I approximate this with a simple weighted average, the result of which is displayed on the voltage probe.

<h2>Why does the magnetic field vanish outside of circuits?</h2>
Because the simulation is in 2D, circuits actually extend infinitely in the z-direction (out of the page), so current flowing through a closed circuit has the same effect as current flowing through a 3D solenoid.
If you recall from E&amp;M class, the magnetic field within an infinitely long solenoid is entirely contained within it. This is certainly a point of departure from how we expect circuits to behave. It means that each current loop has its own inductance,
and trying to create "inductors" that behave like their 3D counterparts is quite tricky.
<p>
    Copyright (c) 2025 Brandon Li<br>
    <a href="mailto:brandonli.lex@gmail.com">brandonli.lex@gmail.com</a>
</p>
</main>