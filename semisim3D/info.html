<main>
  <style>
    body {
    font-family: "Segoe UI", Roboto, sans-serif;
    background-color: #f8f9fa;
    color: #222;
    line-height: 1.6;
    margin: 0;
    padding: 0;
}

main {
    max-width: 850px;
    margin: 0 auto;
    padding: 2rem;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

h1, h2 {
    font-weight: 600;
    color: #2c3e50;
}

h1 {
    font-size: 2rem;
    margin-top: 2rem;
    border-bottom: 2px solid #dee2e6;
    padding-bottom: 0.4rem;
}

h2 {
    font-size: 1.4rem;
    margin-top: 1.5rem;
    border-left: 4px solid #3498db;
    padding-left: 0.5rem;
}

hr {
    border: none;
    border-top: 2px solid #dee2e6;
    margin: 2rem 0;
}

ul {
    padding-left: 1.5rem;
}

li {
    margin: 0.4rem 0;
}

strong {
    color: #34495e;
}

p {
    margin: 0.8rem 0;
}

code {
    background: #f4f4f4;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: Consolas, monospace;
}

@media (max-width: 600px) {
    main {
        padding: 1rem;
    }
    h1 {
        font-size: 1.6rem;
    }
    h2 {
        font-size: 1.2rem;
    }
}

figure {
    margin: 1.5rem auto;
    text-align: center;
}

figure img {
    max-width: 40%;
    height: auto;
    border: 1px solid #ccc;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

figcaption {
    font-size: 0.9rem;
    color: #555;
    margin-top: 0.4rem;
    font-style: italic;
}

table {
  width:100%;
  border-collapse: collapse; /* optional: removes double borders */
}

td, th {
  vertical-align: top; /* aligns text at the top of cells */
  padding: 6px; /* optional: adds some spacing */
}

td:first-child, th:first-child {
  font-weight: bold; /* makes first column bold */
  color: #34495e;
    width: 25%;
}

  </style>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js">
  </script>

<h1>Installation Troubleshooting</h1>
<h2>Running the Program</h2>
<ol>
  <li>Make sure you have the latest version of Java installed.</li>
  <li>If SemiSim crashes when loading a file:
    <ul>
      <li>Make sure you have a 64-bit version of Java installed.</li>
    </ul>
  </li>
</ol>

<h2>Mac OS</h2>
<ol>
  <li>If you see "<i>SemiSim.jar cannot be opened because it is from an unidentified developer</i>":
    <ul>
      <li>Right click "SemiSim.jar" and click <b>Open</b>.</li>
      <li>Click <b>Open</b> again on the popup window.</li>
    </ul>
  </li>
  <li>If you are unable to see and open files:
    <ul>
      <li>Go into <b>System Preferences → Security → Privacy → Full Disk Access</b>.</li>
      <li>Add <code>/System/Library/CoreServices/Jar Launcher.app</code> to the list and give it disk access.</li>
    </ul>
  </li>
</ol>


<h1>Introduction</h1>
Brandon's electromagnetic simulation simulates simple circuits in three dimensions. Like <a href="https://brandonli.net/semisim">SemiSim</a>, it allows users to create their own circuits with a simple interface.
There is a variety of materials to choose from and a variety of premade examples to look at.

<h2>Physics</h2>
The simulation takes place on a three-dimensional cubic grid. It uses an FDTD method to compute the dynamics of the E and B fields. This simulation demonstrates the following concepts:
<ul>
<li>Electromagnetic fields</li>
<li>Charges</li>
<li>Current and voltage</li>
<li>Capacitance and inductance</li>
<li>Basic electrical circuits</li>
</ul>

<h1>Simulation features</h1>
The interface consists of the simulation area which the user can interact with and the settings panel containing all the simulation controls. <figure><img src="images/app.png" alt="Application" style="max-width:60%"><figcaption>Simulation area (left) and settings (right).</figcaption></figure>
The main way to interact with circuits is to change the strength of voltage sources and turn switches on and off. The quickest way to get started is to load one of the examples and start changing the voltages.
<h2>Simulation variables</h2>
Listed below are the most important variables that capture the state of the simulation at a given time:
<table>
<ul>
  <tr><td>\(\vec{E} = (E_x, E_y, 0)\)</td><td>Electric field [V/m]</td></tr>
  <tr><td>\(\vec{B} = (0, 0, B_z)\)</td><td>Magnetic field [T]</td></tr>
  <tr><td>\(\rho\)</td><td>Charge density [C/m^3]</td></tr>
  <tr><td>\(\vec{J}\)</td><td>Current density [A/m^2]</td></tr>
  <tr><td>\(\vec{D} = \epsilon \vec{E}\)</td><td>Electric displacement field [C/m^2]</td></tr>
  <tr><td>\(\vec{H} = \frac{1}{\mu} \vec{B}\)</td><td>Magnetic field [A/m]</td></tr>
  <tr><td>\(\vec{S} = \vec{E}\times \vec{H}\)</td><td>Poynting vector [W/m^2]</td></tr>
  <tr><td>\(u = \frac{1}{2}(\vec{E}\cdot \vec{D} + \vec{B} \cdot \vec{H})\)</td><td>Electromagnetic energy density [J/m^3]</td></tr>
  <tr><td>\(\phi\)</td><td>Electric scalar potential [V]</td></tr>
  <tr><td>\(Q\)</td><td>Heat dissipation [J/(s m^3)]</td></tr>
  <tr><td>\(S\)</td><td>Entropy generation [J/ (K s m^3)]</td></tr>
</ul>
</table>
<h2>Vector view modes</h2>
  <p><strong>Arrows:</strong> The direction and brightness of arrows corresponds to the direction and magnitude of the vector field. <figure><img src="images/arrows.png" alt="Arrows"></figure></p>
  <p><strong>Lines:</strong> 
The brightness and density of lines indicates the magnitude of the field. <figure><img src="images/lines.png" alt="Field lines"></figure></p>



<h2>Rendering modes</h2>
<table>
  <tr><td>2D x cross-section</td><td>Displays a cross-section in the y and z directions along a slice of constant x, controlled by the "Slice" slider.</td></tr>
  <tr><td>2D y cross-section</td><td>Displays a cross-section along a slice of constant y.</td></tr>
  <tr><td>2D z cross-section</td><td>Displays a cross-section along a slice of constant z.<figure><img src="images/2d_1.png" alt="Band plot" style="max-width:40%"></figure></td></tr>
  <tr><td>3D orthographic</td><td>Displays an orthographic three-dimensional view of the scene (viewer infinitely far away).<figure><img src="images/3d_1.png" alt="Band plot" style="max-width:40%"></figure></td></tr>
  <tr><td>3D orthographic (fields only)</td><td>Render only the field lines/vectors.<figure><img src="images/3d_2.png" alt="Band plot" style="max-width:40%"></figure></td></tr>
  <tr><td>3D orthographic (transparent)</td><td>Makes solid objects semi-transparent.<figure><img src="images/3d_3.png" alt="Band plot" style="max-width:40%"></figure></td></tr>
  <tr><td>3D perspective</td><td>Displays a persepective view of the scene (viewer at finite distance).</td></tr>
  <tr><td>3D perspective (fields only)</td><td>Render only the field lines/vectors.</td></tr>
  <tr><td>3D perspective (transparent)</td><td>Makes solid objects semi-transparent.</td></tr>
  <tr><td>3D stereoscopic (cross-eye)</td><td>Renders a binocular image that allows the viewer to see depth by <a href="https://en.wikipedia.org/wiki/Stereoscopy">crossing their eyes.<figure><img src="images/3d_4.png" alt="Band plot" style="max-width:40%"></figure></a></td></tr>
  <tr><td>3D stereoscopic (parallel)</td><td>Left and right eyes are flipped with respect to cross-eye.</a></td></tr>
</table>

<h2>Options</h2>
<table>
  <tr><td>Pause</td><td>Pauses and unpauses the simulation.</td></tr>
  <tr><td>Show detailed info</td><td>Displays a tooltip that contains the values of all the simulation variables at the cursor's location.</td></tr>
  <tr><td>Show text background</td><td>Gives text boxes a black background, making the text easier to see.</td></tr>
  <tr><td>Display interface</td><td>Shows probe info, graph locations, time, and tooltip.</td></tr>
  <tr><td>Boundary condition</td><td>Choose between a boundary that absorbs outgoing radiation or a perfectly conductive boundary that reflects it.</td></tr>
  <tr><td>Scalar view</td><td>Choose which field to display as a color scale over the simulation field.</td></tr>
  <tr><td>Vector view</td><td>Choose which vector field to visualize (only works for 2D vectors, see "Vector view modes").</td></tr>
  <tr><td>3D mode</td><td>Choose between different two and three-dimensional persectives.</td></tr>
  <tr><td>Show material colors</td><td>If checked, gives each material a different color, making them easier to tell apart.</td></tr>
  <tr><td>Timestep</td><td>Sets the simulation timestep. The maximum timestep is determined by the CFL condition for the wave equation and diffusion equations for each charge carrier.</td></tr>
  <tr><td>Sim steps/frame</td><td>Sets the number of iterations performed during each frame. Most of the examples require at least 10 steps/frame to run responsively.
    The maximum number depends on how good the user's computer is.</td></tr>
  <tr><td>Scalar brightness</td><td>Sets the brightness of the scalar field.</td></tr>
  <tr><td>Vector brightness</td><td>Sets the brightness of the vector field.</td></tr>
  <tr><td>Parallax</td><td>Determines the angle between the two eyes in stereoscopic mode (adjust for comfort).</td></tr>
  <tr><td>Save scenario</td><td>Saves the current simulation to a file.</td></tr>
  <tr><td>Load scenario</td><td>Loads a simulation from a file. SemiSim comes with a variety of pre-made simulations located in the "examples" folder.</td></tr>
  <tr><td>Clear all</td><td>Removes all materials and resets all fields.</td></tr>
  <tr><td>Set fields to zero</td><td>Sets all fields to their default values, leaving the materials unchanged.</td></tr>
  <tr><td>Rotate view<br> </td><td>Makes the 3D scene spin around.</td></tr>
  <tr><td>Tool</td><td>Selects one of the tools.</td></tr>
  </table>

<h2>Tools</h2>
<table>
    <tr><td>Interact</td><td>Allows user to control voltage sources and turn switches on and off by clicking.</td></tr>
    <tr><td>Draw</td><td>Adds material to the field.</td></tr>
    <tr><td>Voltage</td><td>Adds a voltage probe that measures electrochemical potential at a certain point (See "What do voltmeters actually measure").</td></tr>
    <tr><td>Current <br><small>[click and drag]</small></td><td>Adds a current probe that measures current across a wire.
    </td></tr>
    <tr><td>Ground</td><td>Specifies the point relative to which probes measure voltage (optional).</td></tr>
    <tr><td>Delete probe</td><td>Click to delete a probe.</td></tr>
    <tr><td>Replace</td><td>Similar to the draw tool, but overwrites occupied areas.</td></tr>
    <tr><td>Line <br><small>[click and drag]</small></td><td>Draws a line of material.</td></tr>
    <tr><td>Fill</td><td>Fills a region with a certain material, similar to the bucket tool.</td></tr>
    <tr><td>Erase</td><td>Erases material.</td></tr>
    <tr><td>Select</td><td>Makes a rectangular selection which can be dragged around and moved.</td></tr>
    <tr><td>Select region</td><td>Selects a contiguous region, similar to the bucket tool.</td></tr>
</table>

<h2>Keyboard/Mouse Controls</h2>
<table>
    <tr><td>P or Space</td><td>Pause &amp; unpause</td></tr>
    <tr><td>F</td><td>Advance frame</td></tr>
    <tr><td>Q</td><td>Change brush shape</td></tr>
    <tr><td>C</td><td>Toggle material color</td></tr>
    <tr><td>V</td><td>Toggle vectors</td></tr>
    <tr><td>S</td><td>Toggle scalar colors</td></tr>
    <tr><td>T</td><td>Toggle tooltip</td></tr>
    <tr><td>G</td><td>Toggle text background</td></tr>
    <tr><td>H</td><td>Toggle user interface</td></tr>
    <tr><td>Mouse wheel</td><td>Change brush size</td></tr>
    <tr><td>Shift</td><td>Draw straight lines</td></tr>
    <tr><td>Ctrl</td><td>Fill area</td></tr>
    <tr><td>Alt or Option</td><td>Pick material</td></tr>
    <tr><td>Ctrl-X</td><td>Cut</td></tr>
    <tr><td>Ctrl-C</td><td>Copy</td></tr>
    <tr><td>Ctrl-V</td><td>Paste</td></tr>
    <tr><td>Left mouse</td><td>Draw material</td></tr>
    <tr><td>Right mouse</td><td>Erase material</td></tr>
    <tr><td>Middle mouse</td><td>Pick material</td></tr>
</table>

<h2>Materials</h2>
<table>
    <tr><td>Voltage source</td><td>Generates a voltage that can be used to power circuits.</td></tr>
    <tr><td>AC voltage source</td><td>Voltage source that oscillates sinusoidally at a fixed frequency.</td></tr>
    <tr><td>Switch</td><td>Conductivity can be switched on and off by the user.</td></tr>
    <tr><td>Metal</td><td>Material that conducts electricity very well.</td></tr>
    <tr><td>Conductive metal</td><td>More conductive than regular metal.</td></tr>
    <tr><td>Resistive metal</td><td>Less conductive than regular metal.</td></tr>
    <tr><td>Dielectric</td><td>Material with a large permittivity/dielectric constant.</td></tr>
    <tr><td>Ferromagnet</td><td>Magnetic material with high relative permeability.</td></tr>
    <tr><td>Positive static charge</td><td>Positively charged insulating material.</td></tr>
    <tr><td>Negative static charge</td><td>Negatively charged insulating material.</td></tr>
    <tr><td>Decoration</td><td>Used for text or circuit symbols, has no effect otherwise.</td></tr>
    <tr><td>Vacuum</td><td>Empty space.</td></tr>
</table>

<!--
<h1>Technical details</h1>
The simulation runs on a staggered grid with B and rho...
- equations
- discretization scheme
- numerical stability & CFL condition
- logarithmic mean
- parallelism
[TODO]
-->

<h1>Miscellaneous questions and answers</h1>

<h2>Why aren't there semiconductors?</h2>
The grid resolution of 32x32x32 is not enough to accurately simulate a semiconductor junction. In the future, higher resolutions may become possible.

<p>
    Copyright (c) 2025 Brandon Li<br>
    <a href="mailto:brandonli.lex@gmail.com">brandonli.lex@gmail.com</a>
</p>
</main>